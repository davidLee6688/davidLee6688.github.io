<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JavaScript," />










<meta name="description" content="一. 基础知识1.1 JavaScript之HelloWorld123&lt;script&gt;   console.log(&quot;hello world!!!&quot;)&lt;&#x2F;script&gt;  script可以内联代码，也可以通过src属性来引入外部指定脚本代码 1.2 运算符运算元：  指的是运算符作用的对象 一元运算符： 作用于一个运算元 二元运算符： 作用于两个运算元 JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript教程">
<meta property="og:url" content="https://davidlee6688.github.io/2020/06/04/2020-2020-06-04-JavaScript%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="前端追梦人">
<meta property="og:description" content="一. 基础知识1.1 JavaScript之HelloWorld123&lt;script&gt;   console.log(&quot;hello world!!!&quot;)&lt;&#x2F;script&gt;  script可以内联代码，也可以通过src属性来引入外部指定脚本代码 1.2 运算符运算元：  指的是运算符作用的对象 一元运算符： 作用于一个运算元 二元运算符： 作用于两个运算元 JavaScript">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://davidlee6688.github.io/img/%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%9F%A5%E6%89%BE.jpg">
<meta property="article:published_time" content="2020-06-04T09:56:44.000Z">
<meta property="article:modified_time" content="2020-06-05T09:30:25.373Z">
<meta property="article:author" content="davidLee">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://common.cnblogs.com/images/copycode.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://davidlee6688.github.io/2020/06/04/2020-2020-06-04-JavaScript教程/"/>





  <title>JavaScript教程 | 前端追梦人</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?52142fac57240aa25d9013d47e5ec0f1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">前端追梦人</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">learn forever</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://davidlee6688.github.io/2020/06/04/2020-2020-06-04-JavaScript%E6%95%99%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="davidLee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="前端追梦人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JavaScript教程</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-04T17:56:44+08:00">
                2020-06-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/06/04/2020-2020-06-04-JavaScript%E6%95%99%E7%A8%8B/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/06/04/2020-2020-06-04-JavaScript%E6%95%99%E7%A8%8B/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="一-基础知识"><a href="#一-基础知识" class="headerlink" title="一. 基础知识"></a>一. 基础知识</h1><h2 id="1-1-JavaScript之HelloWorld"><a href="#1-1-JavaScript之HelloWorld" class="headerlink" title="1.1 JavaScript之HelloWorld"></a>1.1 JavaScript之HelloWorld</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"hello world!!!"</span>)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>script可以内联代码，也可以通过src属性来引入外部指定脚本代码</p>
<h2 id="1-2-运算符"><a href="#1-2-运算符" class="headerlink" title="1.2 运算符"></a>1.2 运算符</h2><p>运算元：  指的是运算符作用的对象</p>
<p>一元运算符： 作用于一个运算元</p>
<p>二元运算符： 作用于两个运算元</p>
<p>JavaScript中运算符主要用于连接简单表达式，组成一个复杂的表达式。常见的有算数表达式、比较表达式、逻辑表达式、赋值表达式等，也有单目运算符，指操作原始表达式。大多数运算符都由标点符号组成（+、&gt;=、!），也有关键字表示的运算符，如typeof、delete、instanceof等。</p>
<ul>
<li><p>一、算数运算符：<br>1、加法运算符：a + b<br>2、减法运算符： a - b<br>3、乘法运算符： a * b<br>4、除法运算符：a / b<br>5、余数运算符：a % b<br>6、自增运算符：++a 或者a++<br>7、自减运算符：–a 或者 a–<br>8、求负运算符：-a<br>9、数值运算符： +a</p>
</li>
<li><p>二、赋值运算符：<br>赋值运算符用于给变量赋值,最常见的赋值运算符是等号，表达式a=b表示将b赋值给a.<br>1、a += b // 等同于 a = a + b<br>2、a -= b // 等同于 a = a - b<br>3、a *= b // 等同于 a = a * b<br>4、a /= b // 等同于 a = a / b<br>5、a %= b // 等同于 a = a % b<br>6、a &gt;&gt;= b // 等同于 a = a &gt;&gt; b<br>7、a &lt;&lt;= b // 等同于 a = a &lt;&lt; b<br>8、a &gt;&gt;&gt;= b // 等同于 a = a &gt;&gt;&gt; b<br>9、a &amp;= b // 等同于 a = a &amp; b<br>10、a |= b // 等同于 a = a | b<br>11、a ^= b // 等同于 a = a ^ b</p>
</li>
<li><p>三、比较运算符：<br>比较运算符比较两个值，然后返回一个布尔值，表示是否满足比较条件。JavaScript提供了8个比较运算符。<br>1、相等:==<br>2、严格相等: ===<br>3、不相等:!=<br>4、严格不相等:!==<br>5、小于:&lt;<br>6、小于或等于:&lt;=<br>7、大于:&gt;<br>8、大于或等于:&gt;=</p>
</li>
<li><p>四、三元运算符:<br>语法：表达式1 ? 表达式2 : 表达式3<br>说明：如果表达式1为true ，则整个表达式的结果就是表达式2的值，如果表达式false，则整个表达式的结果就是表达式3的值.</p>
</li>
<li><p>五、位运算符:<br>1、或运算：符号为|，表示两个二进制位中有一个为1，则结果为1，否则为0。<br>2、与运算：符号为&amp;，表示两个二进制位都为1，则结果为1，否则为0。<br>3、否运算：符号为～，表示将一个二进制位变成相反值。<br>4、异或运算：符号为ˆ，表示两个二进制位中有且仅有一个为1时，结果为1，否则为0。<br>5、左移运算：符号为&lt;&lt;右<br>6、移运算：符号为&gt;&gt;</p>
</li>
</ul>
<p><strong>运算符的优先级</strong></p>
<table>
<thead>
<tr>
<th align="center"><strong>优先级</strong></th>
<th align="center"><strong>运算符</strong></th>
<th align="center"><strong>说明</strong></th>
<th align="center"><strong>结合性</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>[]</code>、<code>.</code>、<code>()</code></td>
<td align="center">字段访问、数组索引、函数调用和表达式分组</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">++ – -~!delete new typeof void</td>
<td align="center">一元运算符、返回数据类型、对象创建、未定 义的值</td>
<td align="center">从右向左</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">*、/、%</td>
<td align="center">相乘、相除、求余数</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">+、-</td>
<td align="center">相加、相减、字符串串联</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">&lt;&lt;、&gt;&gt;、&gt;&gt;&gt;</td>
<td align="center">左位移、右位移、无符号右移</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">&lt;、&lt;=、&gt;、&gt;=、instanceof</td>
<td align="center">小于、小于或等于、大于、大于或等于、是否 为特定类的实例</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">==、!=、===、!==</td>
<td align="center">相等、不相等、全等，不全等</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">&amp;</td>
<td align="center">按位“与”</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">^</td>
<td align="center">按位“异或”</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">|</td>
<td align="center">按位“或”</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">&amp;&amp;</td>
<td align="center">短路与（逻辑“与”）</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">||</td>
<td align="center">短路或（逻辑“或”）</td>
<td align="center">从左向右</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">?:</td>
<td align="center">条件运算符</td>
<td align="center">从右向左</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">=、+=、-=、*=、/=、%=、&amp;=、|=、^=、&lt;、&lt;=、&gt;、&gt;=、&gt;&gt;=</td>
<td align="center">混合赋值运算符</td>
<td align="center">从右向左</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">,</td>
<td align="center">多个计算</td>
<td align="center">按优先级计算，然后从右向左</td>
</tr>
</tbody></table>
<h2 id="1-3-switch语句"><a href="#1-3-switch语句" class="headerlink" title="1.3 switch语句"></a>1.3 switch语句</h2><p><code>switch</code> 语句可以替代多个 <code>if</code> 判断。</p>
<p><code>switch</code> 语句为多分支选择的情况提供了一个更具描述性的方式。</p>
<p><code>switch</code> 语句有至少一个 <code>case</code> 代码块和一个可选的 <code>default</code> 代码块。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (a) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    alert( <span class="string">'Too small'</span> );</span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">    alert( <span class="string">'Exactly!'</span> );</span><br><span class="line">  <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">    alert( <span class="string">'Too big'</span> );</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    alert( <span class="string">"I don't know such values"</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>任何表达式都可以成为</strong> <code>switch/case</code> <strong>的参数</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">"1"</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (+a) &#123;</span><br><span class="line">  <span class="keyword">case</span> b + <span class="number">1</span>:</span><br><span class="line">    alert(<span class="string">"this runs, because +a is 1, exactly equals b+1"</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    alert(<span class="string">"this doesn't run"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里 <code>+a</code> 返回 <code>1</code>，这个值跟 <code>case</code> 中 <code>b + 1</code> 相比较，然后执行对应的代码。</p>
<p><strong>Case分组</strong></p>
<p>共享同一段代码的几个 <code>case</code> 分支可以被分为一组：</p>
<p>比如，如果我们想让 <code>case 3</code> 和 <code>case 5</code> 执行同样的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (a) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">    alert(<span class="string">'Right!'</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">// (*) 下面这两个 case 被分在一组</span></span><br><span class="line">  <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">    alert(<span class="string">'Wrong!'</span>);</span><br><span class="line">    alert(<span class="string">"Why don't you take a math class?"</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    alert(<span class="string">'The result is strange. Really.'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>switch的case执行的是严格相等，因此类型必须匹配</strong></p>
<h2 id="1-4-值的比较"><a href="#1-4-值的比较" class="headerlink" title="1.4 值的比较"></a>1.4 值的比较</h2><p>值的比较</p>
<p>我们知道，在数学中有很多用于比较大小的运算符：</p>
<ul>
<li>大于 / 小于：<code>a &gt; b</code>，<code>a &lt; b</code>。</li>
<li>大于等于 / 小于等于：<code>a &gt;= b</code>，<code>a &lt;= b</code>。</li>
<li>检查两个值的相等：<code>a == b</code>（注意表达式中是两个等号 <code>=</code>，若写为单个等号 <code>a = b</code> 则表示赋值）。</li>
<li>检查两个值不相等，在数学中使用 <code>≠</code> 符号，而在 JavaScript 中则通过在赋值符号前加叹号表示：`a != b</li>
</ul>
<p><a href="https://zh.javascript.info/comparison#bi-jiao-jie-guo-wei-boolean-lei-xing" target="_blank" rel="noopener">比较结果为 Boolean 类型</a></p>
<p>和其他运算符一样，比较运算符也会有返回值，返回值为布尔值（Boolean）。</p>
<ul>
<li><code>true</code> —— 表示“yes（是）”，“correct（正确）”或“the truth（真相）”。</li>
<li><code>false</code> —— 表示“no（否）”，“wrong（错误）”或“not the truth（非真相）”。</li>
</ul>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert( <span class="number">2</span> &gt; <span class="number">1</span> );  <span class="comment">// true（正确）</span></span><br><span class="line">alert( <span class="number">2</span> == <span class="number">1</span> ); <span class="comment">// false（错误）</span></span><br><span class="line">alert( <span class="number">2</span> != <span class="number">1</span> ); <span class="comment">// true（正确）</span></span><br></pre></td></tr></table></figure>

<p>和其他类型的值一样，比较的结果可以被赋值给任意变量：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = <span class="number">5</span> &gt; <span class="number">4</span>; <span class="comment">// 把比较的结果赋值给 result</span></span><br><span class="line">alert( result ); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><a href="https://zh.javascript.info/comparison#zi-fu-chuan-bi-jiao" target="_blank" rel="noopener">字符串比较</a></p>
<p>在比较字符串的大小时，JavaScript 会使用“字典（dictionary）”或“词典（lexicographical）”顺序进行判定。</p>
<p>换言之，字符串是按字符（母）逐个进行比较的。</p>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert( <span class="string">'Z'</span> &gt; <span class="string">'A'</span> ); <span class="comment">// true</span></span><br><span class="line">alert( <span class="string">'Glow'</span> &gt; <span class="string">'Glee'</span> ); <span class="comment">// true</span></span><br><span class="line">alert( <span class="string">'Bee'</span> &gt; <span class="string">'Be'</span> ); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>字符串的比较算法非常简单：</p>
<ol>
<li>首先比较两个字符串的首位字符大小。</li>
<li>如果一方字符较大（或较小），则该字符串大于（或小于）另一个字符串。算法结束。</li>
<li>否则，如果两个字符串的首位字符相等，则继续取出两个字符串各自的后一位字符进行比较。</li>
<li>重复上述步骤进行比较，直到比较完成某字符串的所有字符为止。</li>
<li>如果两个字符串的字符同时用完，那么则判定它们相等，否则未结束（还有未比较的字符）的字符串更大。</li>
</ol>
<p>在上面的例子中，<code>&#39;Z&#39; &gt; &#39;A&#39;</code> 在算法的第 1 步就得到了返回结果，而字符串 <code>Glow</code> 与 <code>Glee</code> 则继续逐个字符比较：</p>
<ol>
<li><code>G</code> 和 <code>G</code> 相等。</li>
<li><code>l</code> 和 <code>l</code> 相等。</li>
<li><code>o</code> 比 <code>e</code> 大，算法停止，第一个字符串大于第二个。</li>
</ol>
<p><strong>非真正的字典顺序，而是 Unicode 编码顺序</strong></p>
<p>在上面的算法中，比较大小的逻辑与字典或电话簿中的排序很像，但也不完全相同。</p>
<p>比如说，字符串比较对字母大小写是敏感的。大写的 <code>&quot;A&quot;</code> 并不等于小写的 <code>&quot;a&quot;</code>。哪一个更大呢？实际上小写的 <code>&quot;a&quot;</code> 更大。这是因为在 JavaScript 使用的内部编码表中（Unicode），小写字母的字符索引值更大。我们会在 <a href="https://zh.javascript.info/string" target="_blank" rel="noopener">字符串</a> 这章讨论更多关于字符串的细节。</p>
<p><a href="https://zh.javascript.info/comparison#bu-tong-lei-xing-jian-de-bi-jiao" target="_blank" rel="noopener">不同类型间的比较</a></p>
<p>当对不同类型的值进行比较时，JavaScript 会首先将其转化为数字（number）再判定大小。</p>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert( <span class="string">'2'</span> &gt; <span class="number">1</span> ); <span class="comment">// true，字符串 '2' 会被转化为数字 2</span></span><br><span class="line">alert( <span class="string">'01'</span> == <span class="number">1</span> ); <span class="comment">// true，字符串 '01' 会被转化为数字 1</span></span><br></pre></td></tr></table></figure>

<p>对于布尔类型值，<code>true</code> 会被转化为 <code>1</code>、<code>false</code> 转化为 <code>0</code>。</p>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert( <span class="literal">true</span> == <span class="number">1</span> ); <span class="comment">// true</span></span><br><span class="line">alert( <span class="literal">false</span> == <span class="number">0</span> ); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><strong>一个有趣的现象</strong></p>
<p>有时候，以下两种情况会同时发生：</p>
<ul>
<li>若直接比较两个值，其结果是相等的。</li>
<li>若把两个值转为布尔值，它们可能得出完全相反的结果，即一个是 <code>true</code>，一个是 <code>false</code>。</li>
</ul>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">0</span>;</span><br><span class="line">alert( <span class="built_in">Boolean</span>(a) ); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">"0"</span>;</span><br><span class="line">alert( <span class="built_in">Boolean</span>(b) ); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">alert(a == b); <span class="comment">// true!</span></span><br></pre></td></tr></table></figure>

<p>对于 JavaScript 而言，这种现象其实挺正常的。因为 JavaScript 会把待比较的值转化为数字后再做比较（因此 <code>&quot;0&quot;</code> 变成了 <code>0</code>）。若只是将一个变量转化为 <code>Boolean</code> 值，则会使用其他的类型转换规则。</p>
<p><a href="https://zh.javascript.info/comparison#yan-ge-xiang-deng" target="_blank" rel="noopener">严格相等</a></p>
<p>普通的相等性检查 <code>==</code> 存在一个问题，它不能区分出 <code>0</code> 和 <code>false</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert( <span class="number">0</span> == <span class="literal">false</span> ); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>也同样无法区分空字符串和 <code>false</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert( <span class="string">''</span> == <span class="literal">false</span> ); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>这是因为在比较不同类型的值时，处于相等判断符号 <code>==</code> 两侧的值会先被转化为数字。空字符串和 <code>false</code> 也是如此，转化后它们都为数字 0。</p>
<p>如果我们需要区分 <code>0</code> 和 <code>false</code>，该怎么办？</p>
<p><strong>严格相等运算符 <code>===</code> 在进行比较时不会做任何的类型转换。</strong></p>
<p>换句话说，如果 <code>a</code> 和 <code>b</code> 属于不同的数据类型，那么 <code>a === b</code> 不会做任何的类型转换而立刻返回 <code>false</code>。</p>
<p>让我们试试：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert( <span class="number">0</span> === <span class="literal">false</span> ); <span class="comment">// false，因为被比较值的数据类型不同</span></span><br></pre></td></tr></table></figure>

<p>同样的，与“不相等”符号 <code>!=</code> 类似，“严格不相等”表示为 <code>!==</code>。</p>
<p>严格相等的运算符虽然写起来稍微长一些，但是它能够很清楚地显示代码意图，降低你犯错的可能性。</p>
<p><a href="https://zh.javascript.info/comparison#dui-null-he-undefined-jin-hang-bi-jiao" target="_blank" rel="noopener">对 null 和 undefined 进行比较</a></p>
<p>当使用 <code>null</code> 或 <code>undefined</code> 与其他值进行比较时，其返回结果常常出乎你的意料。</p>
<ul>
<li><p>当使用严格相等 <code>===</code> 比较二者时</p>
<p>它们不相等，因为它们属于不同的类型。<code>alert( null === undefined ); // false</code></p>
</li>
<li><p>当使用非严格相等 <code>==</code> 比较二者时</p>
<p>JavaScript 存在一个特殊的规则，会判定它们相等。他们俩就像“一对恋人”，仅仅等于对方而不等于其他任何的值（只在非严格相等下成立）。<code>alert( null == undefined ); // true</code></p>
</li>
<li><p>当使用数学式或其他比较方法 <code>&lt; &gt; &lt;= &gt;=</code> 时：</p>
<p><code>null/undefined</code> 会被转化为数字：<code>null</code> 被转化为 <code>0</code>，<code>undefined</code> 被转化为 <code>NaN</code>。</p>
</li>
</ul>
<p>下面让我们看看，这些规则会带来什么有趣的现象。同时更重要的是，我们需要从中学会如何远离这些特性带来的“陷阱”。</p>
<p><a href="https://zh.javascript.info/comparison#qi-guai-de-jie-guo-nullvs0" target="_blank" rel="noopener">奇怪的结果：null vs 0</a></p>
<p>通过比较 <code>null</code> 和 0 可得：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">                               alert( <span class="literal">null</span> &gt; <span class="number">0</span> );  <span class="comment">// (1) false</span></span><br><span class="line">alert( <span class="literal">null</span> == <span class="number">0</span> ); <span class="comment">// (2) false</span></span><br><span class="line">alert( <span class="literal">null</span> &gt;= <span class="number">0</span> ); <span class="comment">// (3) true</span></span><br></pre></td></tr></table></figure>

<p>是的，上面的结果完全打破了你对数学的认识。在最后一行代码显示“<code>null</code> 大于等于 0”的情况下，前两行代码中一定会有一个是正确的，然而事实表明它们的结果都是 false。</p>
<p>为什么会出现这种反常结果，这是因为相等性检查 <code>==</code> 和普通比较符 <code>&gt; &lt; &gt;= &lt;=</code> 的代码逻辑是相互独立的。进行值的比较时，<code>null</code> 会被转化为数字，因此它被转化为了 <code>0</code>。这就是为什么（3）中 <code>null &gt;= 0</code> 返回值是 true，（1）中 <code>null &gt; 0</code> 返回值是 false。</p>
<p>另一方面，<code>undefined</code> 和 <code>null</code> 在相等性检查 <code>==</code> 中不会进行任何的类型转换，它们有自己独立的比较规则，所以除了它们之间互等外，不会等于任何其他的值。这就解释了为什么（2）中 <code>null == 0</code> 会返回 false。</p>
<p><a href="https://zh.javascript.info/comparison#te-li-du-hang-de-undefined" target="_blank" rel="noopener">特立独行的 undefined</a></p>
<p><code>undefined</code> 不应该被与其他值进行比较：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert( <span class="literal">undefined</span> &gt; <span class="number">0</span> ); <span class="comment">// false (1)</span></span><br><span class="line">alert( <span class="literal">undefined</span> &lt; <span class="number">0</span> ); <span class="comment">// false (2)</span></span><br><span class="line">alert( <span class="literal">undefined</span> == <span class="number">0</span> ); <span class="comment">// false (3)</span></span><br></pre></td></tr></table></figure>

<p>为何它看起来如此厌恶 0？返回值都是 false！</p>
<p>原因如下：</p>
<ul>
<li><code>(1)</code> 和 <code>(2)</code> 都返回 <code>false</code> 是因为 <code>undefined</code> 在比较中被转换为了 <code>NaN</code>，而 <code>NaN</code> 是一个特殊的数值型值，它与任何值进行比较都会返回 <code>false</code>。</li>
<li><code>(3)</code> 返回 <code>false</code> 是因为这是一个相等性检查，而 <code>undefined</code> 只与 <code>null</code> 相等，不会与其他值相等。</li>
</ul>
<p><a href="https://zh.javascript.info/comparison#gui-bi-cuo-wu" target="_blank" rel="noopener">规避错误</a></p>
<p>我们为何要研究上述示例？我们需要时刻记得这些古怪的规则吗？不，其实不需要。虽然随着代码写得越来越多，我们对这些规则也都会烂熟于胸，但是我们需要更为可靠的方法来避免潜在的问题：</p>
<p>除了严格相等 <code>===</code> 外，其他凡是有 <code>undefined/null</code> 参与的比较，我们都需要额外小心。</p>
<p>除非你非常清楚自己在做什么，否则永远不要使用 <code>&gt;= &gt; &lt; &lt;=</code> 去比较一个可能为 <code>null/undefined</code> 的变量。对于取值可能是 <code>null/undefined</code> 的变量，请按需要分别检查它的取值情况。</p>
<p><a href="https://zh.javascript.info/comparison#zong-jie" target="_blank" rel="noopener">总结</a></p>
<ul>
<li>比较运算符始终返回布尔值。</li>
<li>字符串的比较，会按照“词典”顺序逐字符地比较大小。</li>
<li>当对不同类型的值进行比较时，它们会先被转化为数字（不包括严格相等检查）再进行比较。</li>
<li>在非严格相等 <code>==</code> 下，<code>null</code> 和 <code>undefined</code> 相等且各自不等于任何其他的值。</li>
<li>在使用 <code>&gt;</code> 或 <code>&lt;</code> 进行比较时，需要注意变量可能为 <code>null/undefined</code> 的情况。比较好的方法是单独检查变量是否等于 <code>null/undefined</code>。</li>
</ul>
<h2 id="1-5-函数Function"><a href="#1-5-函数Function" class="headerlink" title="1.5 函数Function"></a>1.5 函数Function</h2><p>一、函数基本概念</p>
<p>　　为完成某一功能的程序指令(语句)的集合，称为函数。</p>
<p>二、JavaScript函数的分类</p>
<p>　　1、自定义函数(我们自己编写的函数)，如：function funName(){}</p>
<p>　　2、系统函数(JavaScript自带的函数)，如alert函数。</p>
<p>三、函数的调用方式</p>
<p>　　1、普通调用：functionName(实际参数…)</p>
<p>　　2、通过指向函数的变量去调用：</p>
<p>　　　　　　var myVar=函数名;</p>
<p>　　　　　　myVar(实际参数…);</p>
<p>四、函数返回值</p>
<p>　　1.当函数无明确返回值时，返回的值就是”undefined”。</p>
<p>　　2.当函数有返回值时，返回值是什么就返回什么。</p>
<p>五、函数的可变参数:</p>
<p>函数的参数列表可以是任意多个，并且数据类型可以是任意的类型，JavaScript的函数天然支持可变参数，JavaScript有一个arguments变量可以访问所有传到函数内部的参数。</p>
<p><strong>范例：JavaScript使用arguments创建参数可变的函数</strong></p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span> &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"> <span class="number">2</span>     <span class="comment">/*add函数是一个参数可变的函数*/</span></span><br><span class="line"> <span class="number">3</span>     <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="number">4</span>         <span class="keyword">var</span> result=<span class="number">0</span>;</span><br><span class="line"> <span class="number">5</span>         <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="built_in">arguments</span>.length;i++)&#123;</span><br><span class="line"> <span class="number">6</span>             <span class="comment">//alert(arguments[i]);</span></span><br><span class="line"> <span class="number">7</span>             result+=<span class="built_in">arguments</span>[i];</span><br><span class="line"> <span class="number">8</span>         &#125;</span><br><span class="line"> <span class="number">9</span> </span><br><span class="line"><span class="number">10</span>         <span class="keyword">return</span> result;</span><br><span class="line"><span class="number">11</span>     &#125;</span><br><span class="line"><span class="number">12</span>     alert(<span class="string">"add(1,2,3)="</span>+add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>));<span class="comment">//调用add函数时传入3个参数</span></span><br><span class="line"><span class="number">13</span>     alert(<span class="string">"add(1,2,3,4,5,6)="</span>+add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>));<span class="comment">//调用add函数时传入6个参数</span></span><br><span class="line"><span class="number">14</span>     alert(<span class="string">"add()="</span>+add());<span class="comment">//调用add函数时不传入参数</span></span><br><span class="line"><span class="number">15</span>     alert(<span class="string">"add(1,\"HelloWorld\")="</span>+add(<span class="number">1</span>,<span class="string">"HelloWorld"</span>));<span class="comment">//调用add函数时传入不同类型的参数</span></span><br><span class="line"><span class="number">16</span>   &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>六、函数的动态创建</p>
<p>　　<strong>创建动态函数的基本格式：var 变量名 = new Function(“参数1”，”参数2”，”参数n”，”执行语句”);</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="number">2</span>     <span class="keyword">var</span> square = <span class="keyword">new</span> <span class="built_in">Function</span> (<span class="string">"x"</span>,<span class="string">"y"</span>,<span class="string">"var sum ; sum = x+y;return sum;"</span>);</span><br><span class="line"><span class="number">3</span>     alert(<span class="string">"square(2,3)的结果是："</span>+square(<span class="number">2</span>,<span class="number">3</span>));</span><br><span class="line"><span class="number">4</span>   &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>七、匿名函数</p>
<p>　直接声明一个匿名函数，立即使用。用匿名函数的好处就是省得定义一个用一次就不用的函数，而且免了命名冲突的问题，js中没有命名空间的概念，因此很容易函数名字冲突，一旦命名冲突以最后声明的为准。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="function"><span class="keyword">function</span>(<span class="params">i1, i2</span>) </span>&#123; <span class="keyword">return</span> i1 + i2; &#125;(<span class="number">10</span>,<span class="number">10</span>));</span><br></pre></td></tr></table></figure>

<p>八、JavaScript不支持函数重载</p>
<p>九. 函数表达式</p>
<p>另一种创建函数的语法称为 <strong>函数表达式</strong>。</p>
<p>通常会写成这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert( <span class="string">"Hello"</span> );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在这里，函数被创建并像其他赋值一样，被明确地分配给了一个变量。不管函数是被怎样定义的，都只是一个存储在变量 <code>sayHi</code> 中的值。</p>
<p>上面这两段示例代码的意思是一样的：“创建一个函数，并把它存进变量 <code>sayHi</code>”。</p>
<p>我们还可以用 <code>alert</code> 打印这个变量值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert( <span class="string">"Hello"</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert( sayHi ); <span class="comment">// 显示函数代码</span></span><br></pre></td></tr></table></figure>

<p>注意，最后一行代码并不会运行函数，因为 <code>sayHi</code> 后没有括号。在其他编程语言中，只要提到函数的名称都会导致函数的调用执行，但 JavaScript 可不是这样。</p>
<p>在 JavaScript 中，函数是一个值，所以我们可以把它当成值对待。上面代码显示了一段字符串值，即函数的源码。</p>
<p>的确，在某种意义上说一个函数是一个特殊值，我们可以像 <code>sayHi()</code> 这样调用它。</p>
<p>但它依然是一个值，所以我们可以像使用其他类型的值一样使用它。</p>
<p>我们可以复制函数到其他变量：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;   <span class="comment">// (1) 创建</span></span><br><span class="line">  alert( <span class="string">"Hello"</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> func = sayHi;    <span class="comment">// (2) 复制</span></span><br><span class="line"></span><br><span class="line">func(); <span class="comment">// Hello     // (3) 运行复制的值（正常运行）！</span></span><br><span class="line">sayHi(); <span class="comment">// Hello    //     这里也能运行（为什么不行呢）</span></span><br></pre></td></tr></table></figure>

<p>解释一下上段代码发生的细节：</p>
<ol>
<li><code>(1)</code> 行声明创建了函数，并把它放入到变量 <code>sayHi</code>。</li>
<li><code>(2)</code> 行将 <code>sayHi</code> 复制到了变量 <code>func</code>。请注意：<code>sayHi</code> 后面没有括号。如果有括号，<code>func = sayHi()</code> 会把 <code>sayHi()</code> 的调用结果写进<code>func</code>，而不是 <code>sayHi</code> <strong>函数</strong> 本身。</li>
<li>现在函数可以通过 <code>sayHi()</code> 和 <code>func()</code> 两种方式进行调用。</li>
</ol>
<p>注意，我们也可以在第一行中使用函数表达式来声明 <code>sayHi</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert( <span class="string">"Hello"</span> );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> func = sayHi;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>这两种声明的函数是一样的。</p>
<p><strong>为什么这里末尾会有个分号？</strong></p>
<p>你可能想知道，为什么函数表达式结尾有一个分号 <code>;</code>，而函数声明没有：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>答案很简单：</p>
<ul>
<li>在代码块的结尾不需要加分号 <code>;</code>，像 <code>if { ... }</code>，<code>for { }</code>，<code>function f { }</code> 等语法结构后面都不用加。</li>
<li>函数表达式是在语句内部的：<code>let sayHi = ...;</code>，作为一个值。它不是代码块而是一个赋值语句。不管值是什么，都建议在语句末尾添加分号 <code>;</code>。所以这里的分号与函数表达式本身没有任何关系，它只是用于终止语句。</li>
</ul>
<h2 id="1-6-现代模式”use-strict”"><a href="#1-6-现代模式”use-strict”" class="headerlink" title="1.6 现代模式”use strict”"></a>1.6 现代模式”use strict”</h2><p>严格模式是在ES5中引入的，它可以视为JS的一个子集，在严格模式下，限制了JS的标准使用下一些行为。</p>
<ul>
<li>严格模式消除了一些 JavaScript的静默错误，通过改变它们来抛出错误。</li>
<li>严格的模式修复了 JavaScript引擎难以执行优化的错误：有时候，严格模式代码可以比非严格模式的相同的代码运行得更快。</li>
<li>严格模式禁用了在ECMAScript的未来版本中可能会定义的一些语法。</li>
</ul>
<p>这个指令看上去像一个字符串 <code>&quot;use strict&quot;</code> 或者 <code>&#39;use strict&#39;</code>。当它处于脚本文件的顶部时，则整个脚本文件都将以“现代”模式进行工作。</p>
<p><code>&quot;use strict&quot;</code> 可以被放在函数主体的开头，而不是整个脚本的开头。这样则可以只在该函数中启用严格模式。但通常人们会在整个脚本中启用严格模式。</p>
<p>没有类似于 <code>&quot;no use strict&quot;</code> 这样的指令可以使程序返回默认模式。</p>
<p>一旦进入了严格模式，就没有回头路了。</p>
<h4 id="一：简单介绍"><a href="#一：简单介绍" class="headerlink" title="一：简单介绍"></a>一：简单介绍</h4><p>严格模式是在ES5中引入的，它可以视为JS的一个子集，在严格模式下，限制了JS的标准使用下一些行为。</p>
<ul>
<li>严格模式消除了一些 JavaScript的静默错误，通过改变它们来抛出错误。</li>
<li>严格的模式修复了 JavaScript引擎难以执行优化的错误：有时候，严格模式代码可以比非严格模式的相同的代码运行得更快。</li>
<li>严格模式禁用了在ECMAScript的未来版本中可能会定义的一些语法。</li>
</ul>
<p>但是需要注意的是：<strong>不支持严格模式的浏览器将会执行与支持严格模式的浏览器不同行为的严格模式代码。</strong>所以不要依靠严格模式，而是应当加强自己代码的鲁棒性</p>
<h4 id="二：使用方法"><a href="#二：使用方法" class="headerlink" title="二：使用方法"></a>二：使用方法</h4><p>严格模式可以应用于整个脚本或单个函数中。其中的<strong>脚本</strong>不仅仅包括了单个文件，还包括了<strong>dom中事件处理，eval()，Function()，以及window.setTimeOut()中的字符串</strong>。</p>
<h5 id="1：为某个脚本使用严格模式"><a href="#1：为某个脚本使用严格模式" class="headerlink" title="1：为某个脚本使用严格模式"></a>1：为某个脚本使用严格模式</h5><p>需要在<strong>所有代码</strong>前，声明</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br></pre></td></tr></table></figure>

<p><em>PS：注意，必须为”use strict”;或者’use strict’;，且必须带分号结束。</em><br> 但这种使用方式在存在代码引用和合并的时候，会无法正常激活严格模式。因为，当一个声明了严格模式的脚本，被引入合并到一个新的未使用严格模式的脚本中的时候，由于声明并没有在<strong>所有代码</strong>前使用，从而导致严格模式声明失败。<br> 为了保证严格模式的正常使用，一般的做法是用一个外部匿名函数将使用严格模式的脚本封装，然后执行。代码一般如下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  'use strict'</span>;</span><br><span class="line">  <span class="comment">/**** 原有脚本代码 ****/</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>但需要注意的是，这种方法，会将原有的代码封装到一个全局环境的函数中，原有脚本代码的作用域由全局变为了函数内部作用域，因此在使用的时候，务必注意。<br> <em>PS:一个变通的方法是，将内部脚本需要全局的变量，直接声明为全局变量，即不用var或者let定义，比如a，不适用var a;或者let a;，而是直接 a = xxx</em></p>
<h5 id="2：单函数使用严格模式"><a href="#2：单函数使用严格模式" class="headerlink" title="2：单函数使用严格模式"></a>2：单函数使用严格模式</h5><p>单函数使用严格模式，只需要在函数代码开头声明</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br></pre></td></tr></table></figure>

<p>即可</p>
<h4 id="三：严格模式带来的具体差异"><a href="#三：严格模式带来的具体差异" class="headerlink" title="三：严格模式带来的具体差异"></a>三：严格模式带来的具体差异</h4><h5 id="1：消除了静默错误，改为抛出错误"><a href="#1：消除了静默错误，改为抛出错误" class="headerlink" title="1：消除了静默错误，改为抛出错误"></a>1：消除了静默错误，改为抛出错误</h5><ul>
<li>无法静默声明全局变量<br> 全局变量必须显式声明，标准模式下，如果一个变量没有声明就赋值，默认是全局变量。严格模式禁止这种用法，全局变量必须显式声明。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line">v = <span class="number">1</span>; <span class="comment">// 报错，v未声明</span></span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123; <span class="comment">// 报错，i未声明</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>函数的参数必须命名唯一<br> 在正常模式中，如果函数的参数中出现重名，则最后出现的重名参数替换之前出现的参数，但之前出现的参数依然可以通过arguments属性读取。在严格模式下，禁止出现这种情况，此时会跳出错误。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, a, c</span>)</span>&#123; <span class="comment">// !!! 语法错误</span></span><br><span class="line"><span class="meta">  "use strict"</span>;</span><br><span class="line">  <span class="keyword">return</span> a + a + c; <span class="comment">// 代码运行到这里会出错</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>对象的属性名必须唯一<br> 严格模式要求一个对象内的所有属性名在对象内必须唯一。正常模式下重名属性是允许的，最后一个重名的属性决定其属性值。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">p</span>: <span class="number">1</span>, <span class="attr">p</span>: <span class="number">2</span> &#125;; <span class="comment">// !!! 语法错误</span></span><br></pre></td></tr></table></figure>

<ul>
<li>禁止出现八进制数字数据<br> 在ES标准中，并没有八进制数据，但现在的浏览器都支持以0开头作为八进制数据。严格模式下禁止了这种数据类型，但在ES6中，新引入了’0o’前缀来表示八进制数据</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">015</span>; <span class="comment">// 错误</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">0</span>o10; <span class="comment">// ES6: 八进制</span></span><br></pre></td></tr></table></figure>

<ul>
<li>任何在正常模式下引起静默失败的赋值操作 (给不可赋值的全局变量赋值，给不可写属性赋值, 给只读属性(getter-only)赋值赋值, 给不可扩展对象(<a href="https://link.jianshu.com?t=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2FJavaScript%2FReference%2FGlobal_Objects%2FObject%2FpreventExtensions" target="_blank" rel="noopener">non-extensible</a> object)的新属性赋值) 都会抛出异常</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="literal">NaN</span> = <span class="number">1</span>; <span class="comment">// 不可复制的全局变量</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="keyword">get</span> v() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.v</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">"v"</span>, &#123; <span class="attr">value</span>: <span class="number">1</span>, <span class="attr">writable</span>: <span class="literal">false</span> &#125;); <span class="comment">// 不可写的属性</span></span><br><span class="line">o.v = <span class="number">2</span>; <span class="comment">// 报错</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o1 = &#123;</span><br><span class="line">  <span class="keyword">get</span> v() &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;  <span class="comment">// 只读属性</span></span><br><span class="line">&#125;;</span><br><span class="line">o1.v = <span class="number">2</span>; <span class="comment">// 报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 给不可扩展对象的新属性赋值</span></span><br><span class="line"><span class="keyword">var</span> fixed = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(fixed);</span><br><span class="line">fixed.newProp = <span class="string">"ohai"</span>; <span class="comment">// 抛出TypeError错误</span></span><br></pre></td></tr></table></figure>

<ul>
<li>试图删除不可删除的属性时会抛出异常</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">Object</span>.prototype; <span class="comment">// 抛出TypeError错误</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ECMAScript 6中的严格模式禁止设置<a href="https://link.jianshu.com?t=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FGlossary%2Fprimitive" target="_blank" rel="noopener">primitive</a>值的属性.</li>
</ul>
<h5 id="2：修复了JS的随意性，提升了优化能力"><a href="#2：修复了JS的随意性，提升了优化能力" class="headerlink" title="2：修复了JS的随意性，提升了优化能力"></a>2：修复了JS的随意性，提升了优化能力</h5><p>在标准模式下，JS的随意性，或者灵活性，是的很多变量，只有在运行时才能确切知道具体指向，这就使得变量名到内存的映射也只有到运行时才能完成。严格模式修复了大部分这种行为，使得所有的变量名在编译的时候，就已经可以一起进行优化，从而提升了执行速度。</p>
<ul>
<li>禁止使用with<br> 在标准模式中，使用with的时候，with代码块内的变量，只有在运行时，才能根据with引入的Obj是否存在相应的属性，来确定具体的指向。因此，严格模式禁止使用with</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> x = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">with</span> (obj) <span class="comment">// !!! 语法错误</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 如果没有开启严格模式，with中的这个x会指向with上面的那个x，还是obj.x？</span></span><br><span class="line">  <span class="comment">// 如果不运行代码，我们无法知道，因此，这种代码让引擎无法进行优化，速度也就会变慢。</span></span><br><span class="line">  x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>eval不在为上层作用域引入新变量<br> 在标准模式下，如果某个函数内部引入了eval代码。那么在函数内部，所有出现的<em>名称</em>（也就是所有的变量名）应当映射到的变量，除了引用到函数的参数，以及函数的内部变量，可以在编译的时候确定外，其他所有的<em>名称</em>只有在运行的时候，执行完eval代码后才能映射到相应的变量。因为有些变量可能是由eval代码引入到函数作用域的。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">var</span> evalX = <span class="built_in">eval</span>(<span class="string">"'use strict'; var x = 42; x"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(x === <span class="number">17</span>); <span class="comment">// true  未能引入x，所以还是原来的x，但如果去掉 use strict，那么为false</span></span><br><span class="line"><span class="built_in">console</span>.log(evalX === <span class="number">42</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>但在严格格式下，eval不在为上层作用域引入新的局部变量和全局变量。所有的eval中出现的变量，只在eval的字符串代码块中有效。<br> 另外如果判定eval是否为严格模式，也存在各种复杂的情况。<br> – 如果<em>直接</em>调用eval(…)代码的代码块显式使用了严格格式，那么eval()也执行严格格式。如下面代码</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  'use strict'</span>;</span><br><span class="line">  <span class="built_in">eval</span>(...)  <span class="comment">// 无论eval中的字符串是否包含 use strict; 都会进入严格格式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>– 如果直接调用eval的代码块未使用严格模式，而是更上级别的代码块使用了严格模式，则eval代码按照标准模式执行，如下面代码</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  'use strict'</span>;</span><br><span class="line">  f()&#123;&#125; <span class="comment">// 无论eval中的字符串是否包含 use strict; 都会进入严格格式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>– 如果eval(…)的字符串中显式使用了’use strict’; 则必然进入严格模式</p>
<ul>
<li>严格模式禁止删除声明变量</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> x;</span><br><span class="line"><span class="keyword">delete</span> x; <span class="comment">// !!! 语法错误</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">"var y; delete y;"</span>); <span class="comment">// !!! 语法错误</span></span><br></pre></td></tr></table></figure>

<h5 id="3：让eval和arguments变的更加简单"><a href="#3：让eval和arguments变的更加简单" class="headerlink" title="3：让eval和arguments变的更加简单"></a>3：让eval和arguments变的更加简单</h5><ul>
<li>严格模式下，eval和arguments作为保留字<br> 在严格模式下，不允许对eval和arguments进行赋值或者绑定，以下代码全部为错误语法</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="built_in">eval</span> = <span class="number">17</span>;</span><br><span class="line"><span class="built_in">arguments</span>++;</span><br><span class="line">++<span class="built_in">eval</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="keyword">set</span> p(arguments) &#123; &#125; &#125;;</span><br><span class="line"><span class="keyword">var</span> <span class="built_in">eval</span>;</span><br><span class="line"><span class="keyword">try</span> &#123; &#125; <span class="keyword">catch</span> (<span class="built_in">arguments</span>) &#123; &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params">eval</span>) </span>&#123; &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arguments</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="keyword">var</span> y = <span class="function"><span class="keyword">function</span> <span class="title">eval</span>(<span class="params"></span>) </span>&#123; &#125;;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"arguments"</span>, <span class="string">"'use strict'; return 17;"</span>);</span><br></pre></td></tr></table></figure>

<p>经过测试，这里的不得对arguments的复制，指的是arguments这个变量，而不是指的其中的元素，比如</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"><span class="meta">  'use strict'</span>;</span><br><span class="line">  a = <span class="number">42</span>;</span><br><span class="line">  <span class="built_in">arguments</span>[<span class="number">1</span>] = <span class="number">17</span>;  <span class="comment">// 可以通过语法检测，但并不会修改b的值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>依然是允许的，也可以通过语法检测。</p>
<ul>
<li>严格模式下，参数的值，不会随arguments对象的值的变化而修改。arguments对象的值的修改也不会影响同名函数。<br> 在标准模式下，比如一个函数第一个参数为arg，那么在函数内部，修改arg的时候，也会同步修改arguments[0]，反之亦然。但在严格模式下，两者进行了隔离。函数的 arguments 对象会保存函数被调用时的原始参数。arguments[i] 的值不会随与之相应的参数的值的改变而变化，同名参数的值也不会随与之相应的 arguments[i] 的值的改变而变化。</li>
<li>不再支持arguments. callee</li>
</ul>
<h5 id="4：更加安全的JS"><a href="#4：更加安全的JS" class="headerlink" title="4：更加安全的JS"></a>4：更加安全的JS</h5><ul>
<li>对this的严格限制<br> 在普通模式下，无论任何情况下，this都是一个对象。需要注意：this的指向不在函数定义的时候是确定不了的，只有函数执行的时候才能确定this到底指向谁，在标准模式下，只想调用函数的对象。但如果是箭头函数，则this为定义时上下文的this。<br> -使用new新建对象</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> t = <span class="keyword">new</span> test()</span><br><span class="line"><span class="built_in">console</span>.log(t)  <span class="comment">// this 为新建的对象</span></span><br></pre></td></tr></table></figure>

<p>-使用call，apply，bind传入this，如果传入的是数字，字符串，布尔值等，那么就会将这些基本数据的this转换为Number，String，Boolean对象类型。如果传入的是null和undefined，则为全局变量window，默认调用下，this也为window</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function <span class="function"><span class="title">fun</span><span class="params">()</span></span> &#123;</span><br><span class="line">  console.log(typeof <span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">&#125;</span><br><span class="line">console.log(<span class="function"><span class="title">fun</span><span class="params">()</span></span>);  <span class="comment">// window  需要注意，单独的此类 fun()，等价于window.fun()。所以为window</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">call</span><span class="params">(<span class="number">2</span>)</span></span>); <span class="comment">// Number</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">call</span><span class="params">(<span class="string">'2018-01-01 10:00:00'</span>)</span></span>); <span class="comment">// String</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">apply</span><span class="params">(<span class="literal">null</span>)</span></span>); <span class="comment">// window</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">call</span><span class="params">(undefined)</span></span>); <span class="comment">// window</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">bind</span><span class="params">(<span class="literal">true</span>)</span></span>()); <span class="comment">// Boolean</span></span><br></pre></td></tr></table></figure>

<p>上面的这种模式既增加了转换为对象的对象的开销，又因为将全局对象window暴露出来造成安全性问题。<br> 因此在严格模式下指定的this不再被封装为对象，而且如果没有指定this的话它值是undefined，上面的结果如下：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'use strict'</span>;</span><br><span class="line">function <span class="function"><span class="title">fun</span><span class="params">()</span></span> &#123;</span><br><span class="line">  console.log(typeof <span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">&#125;</span><br><span class="line">console.log(<span class="function"><span class="title">fun</span><span class="params">()</span></span>);  <span class="comment">// undefined</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">call</span><span class="params">(<span class="number">2</span>)</span></span>); <span class="comment">// 2</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">call</span><span class="params">(<span class="string">'2018-01-01 10:00:00'</span>)</span></span>); <span class="comment">// '2018-01-01 10:00:00'</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">apply</span><span class="params">(<span class="literal">null</span>)</span></span>); <span class="comment">// null</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">call</span><span class="params">(undefined)</span></span>); <span class="comment">// undefined</span></span><br><span class="line">console.log(<span class="function"><span class="keyword">fun</span>.<span class="title">bind</span><span class="params">(<span class="literal">true</span>)</span></span>()); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>禁止对函数扩展，fun.caller和fun.arguments进行读取和复制<br> 在普通模式下用这些扩展的话，当一个叫fun的函数正在被调用的时候，fun.caller是最后一个调用fun的函数，而且fun.arguments包含调用fun时用的形参。通过这些扩展，可以让<em>不安全</em>的用户操作到危险的属性。<br> 因此在严格模式下，fun.caller和fun.arguments都是不可删除的属性而且在存值、取值时都会报错</li>
</ul>
<h5 id="5：对未来的兼容"><a href="#5：对未来的兼容" class="headerlink" title="5：对未来的兼容"></a>5：对未来的兼容</h5><ul>
<li>增加了一些保留字<br> 在严格模式中一部分字符变成了保留的关键字。这些字符包括implements, interface, let, package, private, protected, public, static和yield</li>
<li>禁止不在脚本或者函数层面声明函数<br> 所谓的脚本层面，指的是文件的全局作用域。而函数层面，指的是函数的直接作用域，这里并不包括了脚本中的块作用域，以及函数中嵌套的块作用域</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; &#125; <span class="comment">// !!! 语法错误</span></span><br><span class="line">  f();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123; &#125; <span class="comment">// !!! 语法错误</span></span><br><span class="line">  f2();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">baz</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 合法</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">eit</span>(<span class="params"></span>) </span>&#123; &#125; <span class="comment">// 同样合法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-7-变量"><a href="#1-7-变量" class="headerlink" title="1.7 变量"></a>1.7 变量</h2><p>如果将变量想象成一个“数据”的盒子，盒子上有一个唯一的标注盒子名字的贴纸。这样我们能更轻松地掌握“变量”的概念。</p>
<p>例如，变量 <code>message</code> 可以被想象成一个标有 <code>&quot;message&quot;</code> 的盒子，盒子里面的值为 <code>&quot;Hello!&quot;</code>：</p>
<p>我们可以在盒子内放入任何值。</p>
<p>并且，这个盒子的值，我们想改变多少次，就可以改变多少次：</p>
<p>当值改变的时候，之前的数据就被从变量中删除了：</p>
<p><strong>变量命名</strong></p>
<p>JavaScript 的变量命名有两个限制：</p>
<ol>
<li>变量名称必须仅包含字母，数字，符号 <code>$</code> 和 <code>_</code>。</li>
<li>首字符必须非数字。</li>
</ol>
<p><strong>全局变量和局部变量</strong></p>
<p>全局变量： 声明在全局环境下的变量或者在函数中未使用var而直接赋值的变量也会被自动提升到全局环境</p>
<p>局部变量： 在函数内容声明的变量，只在函数内部有效，如果与全局变量重名，则优先级更高</p>
<h2 id="1-8-条件运算符和"><a href="#1-8-条件运算符和" class="headerlink" title="1.8 条件运算符和?"></a>1.8 条件运算符和?</h2><p><code>if(...)</code> 语句计算括号里的条件表达式，如果计算结果是 <code>true</code>，就会执行对应的代码块。</p>
<p><code>if (…)</code> 语句会计算圆括号内的表达式，并将计算结果转换为布尔型。</p>
<ul>
<li>数字 <code>0</code>、空字符串 <code>&quot;&quot;</code>、<code>null</code>、<code>undefined</code> 和 <code>NaN</code> 都会被转换成 <code>false</code>。因为他们被称为 “falsy” 值。</li>
<li>其他值被转换为 <code>true</code>，所以它们被称为 “truthy”。</li>
</ul>
<p>所以，下面这个条件下的代码永远不会执行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">0</span>) &#123; <span class="comment">// 0 是 falsy</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>……但下面的条件 —— 始终有效：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">1</span>) &#123; <span class="comment">// 1 是 truthy</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们也可以将未计算的布尔值传入 <code>if</code> 语句，像这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cond = (year == <span class="number">2015</span>); <span class="comment">// 相等运算符的结果是 true 或 false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cond) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>if</code> 语句有时会包含一个可选的 “else” 块。如果判断条件不成立，就会执行它内部的代码。</p>
<p>有时我们需要测试一个条件的几个变体。我们可以通过使用 <code>else if</code> 子句实现。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> year = prompt(<span class="string">'In which year was ECMAScript-2015 specification published?'</span>, <span class="string">''</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (year &lt; <span class="number">2015</span>) &#123;</span><br><span class="line">  alert( <span class="string">'Too early...'</span> );</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (year &gt; <span class="number">2015</span>) &#123;</span><br><span class="line">  alert( <span class="string">'Too late'</span> );</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  alert( <span class="string">'Exactly!'</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>条件运算符</strong></p>
<p>这个运算符通过问号 <code>?</code> 表示。有时它被称为三元运算符，被称为“三元”是因为该运算符中有三个操作数。实际上它是 JavaScript 中唯一一个有这么多操作数的运算符。</p>
<p>语法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = condition ? value1 : value2;</span><br></pre></td></tr></table></figure>

<p>计算条件结果，如果结果为真，则返回 <code>value1</code>，否则返回 <code>value2</code>。</p>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> accessAllowed = (age &gt; <span class="number">18</span>) ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p>技术上讲，我们可以省略 <code>age &gt; 18</code> 外面的括号。问号运算符的优先级较低，所以它会在比较运算符 <code>&gt;</code> 后执行。</p>
<p>下面这个示例会执行和前面那个示例相同的操作：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 比较运算符 “age &gt; 18” 首先执行</span></span><br><span class="line"><span class="comment">//（不需要将其包含在括号中）</span></span><br><span class="line"><span class="keyword">let</span> accessAllowed = age &gt; <span class="number">18</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<h2 id="1-9-交互：alert、prompt-和-confirm"><a href="#1-9-交互：alert、prompt-和-confirm" class="headerlink" title="1.9 交互：alert、prompt 和 confirm"></a>1.9 交互：alert、prompt 和 confirm</h2><p><a href="https://zh.javascript.info/alert-prompt-confirm#alert" target="_blank" rel="noopener">alert</a></p>
<p>语法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(message);</span><br></pre></td></tr></table></figure>

<p>运行这行代码，浏览器会弹出一个信息弹窗并暂停脚本，直到用户点击了“确定”。</p>
<p>举个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">"Hello"</span>);</span><br></pre></td></tr></table></figure>

<p>弹出的这个带有信息的小窗口被称为 <strong>模态窗</strong>。“modal” 意味着用户不能与页面的其他部分（例如点击其他按钮等）进行交互，直到他们处理完窗口。在上面示例这种情况下 —— 直到用户点击“确定”按钮。</p>
<p><a href="https://zh.javascript.info/alert-prompt-confirm#prompt" target="_blank" rel="noopener">prompt</a></p>
<p><code>prompt</code> 函数接收两个参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = prompt(title, [<span class="keyword">default</span>]);</span><br></pre></td></tr></table></figure>

<p>浏览器会显示一个带有文本消息的模态窗口，还有 input 框和确定/取消按钮。</p>
<ul>
<li><p><code>title</code></p>
<p>显示给用户的文本</p>
</li>
<li><p><code>default</code></p>
<p>可选的第二个参数，指定 input 框的初始值。</p>
</li>
</ul>
<p>用户可以在 prompt 对话框的 input 框内输入一些内容，然后点击确定。或者他们可以通过按“取消”按钮或按下键盘的 Esc 键，以取消输入。</p>
<p><code>prompt</code> 将返回用户在 <code>input</code> 框内输入的文本，如果用户取消了输入，则返回 <code>null</code>。</p>
<p>举个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = prompt(<span class="string">'How old are you?'</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">alert(<span class="string">`You are <span class="subst">$&#123;age&#125;</span> years old!`</span>); <span class="comment">// You are 100 years old!</span></span><br></pre></td></tr></table></figure>

<p><strong>IE 浏览器会提供默认值</strong></p>
<p>第二个参数是可选的。但是如果我们不提供的话，Internet Explorer 会把 <code>&quot;undefined&quot;</code> 插入到 prompt。</p>
<p>我们可以在 Internet Explorer 中运行下面这行代码来看看效果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test = prompt(<span class="string">"Test"</span>);</span><br></pre></td></tr></table></figure>

<p>所以，为了 prompt 在 IE 中有好的效果，我们建议始终提供第二个参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test = prompt(<span class="string">"Test"</span>, <span class="string">''</span>); <span class="comment">// &lt;-- for IE</span></span><br></pre></td></tr></table></figure>

<p><a href="https://zh.javascript.info/alert-prompt-confirm#confirm" target="_blank" rel="noopener">confirm</a></p>
<p>语法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = confirm(question);</span><br></pre></td></tr></table></figure>

<p><code>confirm</code> 函数显示一个带有 <code>question</code> 以及确定和取消两个按钮的模态窗口。</p>
<p>点击确定返回 <code>true</code>，点击取消返回 <code>false</code>。</p>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isBoss = confirm(<span class="string">"Are you the boss?"</span>);</span><br><span class="line"></span><br><span class="line">alert( isBoss ); <span class="comment">// 如果“确定”按钮被按下，则显示 true</span></span><br></pre></td></tr></table></figure>

<p><strong>总结</strong></p>
<p>我们学习了与用户交互的 3 个浏览器的特定函数：</p>
<ul>
<li><p><code>alert</code></p>
<p>显示信息。</p>
</li>
<li><p><code>prompt</code></p>
<p>显示信息要求用户输入文本。点击确定返回文本，点击取消或按下 Esc 键返回 <code>null</code>。</p>
</li>
<li><p><code>confirm</code></p>
<p>显示信息等待用户点击确定或取消。点击确定返回 <code>true</code>，点击取消或按下 Esc 键返回 <code>false</code>。</p>
</li>
</ul>
<p>这些方法都是模态的：它们暂停脚本的执行，并且不允许用户与该页面的其余部分进行交互，直到窗口被解除。</p>
<p>上述所有方法共有两个限制：</p>
<ol>
<li>模态窗口的确切位置由浏览器决定。通常在页面中心。</li>
<li>窗口的确切外观也取决于浏览器。我们不能修改它。</li>
</ol>
<h2 id="2-0-数据类型"><a href="#2-0-数据类型" class="headerlink" title="2.0 数据类型"></a>2.0 数据类型</h2><p><strong>值类型(基本类型)</strong>：字符串（String）、数字(Number)、布尔(Boolean)、对空（Null）、未定义（Undefined）、Symbol。</p>
<p><strong>引用数据类型</strong>：对象(Object)、数组(Array)、函数(Function)。</p>
<blockquote>
<p><strong>注：</strong>Symbol 是 ES6 引入了一种新的原始数据类型，表示独一无二的值。</p>
</blockquote>
<p><strong>typeof 操作符</strong></p>
<p>你可以使用 <strong>typeof</strong> 操作符来查看 JavaScript 变量的数据类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="string">"John"</span>                 <span class="comment">// 返回 string</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">3.14</span>                   <span class="comment">// 返回 number</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">NaN</span>                    <span class="comment">// 返回 number</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">false</span>                  <span class="comment">// 返回 boolean</span></span><br><span class="line"><span class="keyword">typeof</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]              <span class="comment">// 返回 object</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;<span class="attr">name</span>:<span class="string">'John'</span>, <span class="attr">age</span>:<span class="number">34</span>&#125;  <span class="comment">// 返回 object</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Date</span>()             <span class="comment">// 返回 object</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;         <span class="comment">// 返回 function</span></span><br><span class="line"><span class="keyword">typeof</span> myCar                  <span class="comment">// 返回 undefined (如果 myCar 没有声明)</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>                   <span class="comment">// 返回 object</span></span><br></pre></td></tr></table></figure>

<p>请注意：</p>
<ul>
<li>NaN 的数据类型是 number</li>
<li>数组(Array)的数据类型是 object</li>
<li>日期(Date)的数据类型为 object</li>
<li>null 的数据类型是 object</li>
<li>未定义变量的数据类型为 undefined</li>
</ul>
<p>如果对象是 JavaScript Array 或 JavaScript Date ，我们就无法通过 <strong>typeof</strong> 来判断他们的类型，因为都是 返回 object。</p>
<p><strong>constructor 属性</strong></p>
<p><strong>constructor</strong> 属性返回所有 JavaScript 变量的构造函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"John"</span>.constructor                 <span class="comment">// 返回函数 String()  &#123; [native code] &#125;</span></span><br><span class="line">(<span class="number">3.14</span>).constructor                 <span class="comment">// 返回函数 Number()  &#123; [native code] &#125;</span></span><br><span class="line"><span class="literal">false</span>.constructor                  <span class="comment">// 返回函数 Boolean() &#123; [native code] &#125;</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].constructor              <span class="comment">// 返回函数 Array()   &#123; [native code] &#125;</span></span><br><span class="line">&#123;<span class="attr">name</span>:<span class="string">'John'</span>, <span class="attr">age</span>:<span class="number">34</span>&#125;.constructor  <span class="comment">// 返回函数 Object()  &#123; [native code] &#125;</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().constructor             <span class="comment">// 返回函数 Date()    &#123; [native code] &#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;.constructor         <span class="comment">// 返回函数 Function()&#123; [native code] &#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>JavaScript 类型转换</strong></p>
<p>JavaScript 变量可以转换为新变量或其他数据类型：</p>
<ul>
<li>通过使用 JavaScript 函数</li>
<li>通过 JavaScript 自身自动转换</li>
</ul>
<p><strong>将数字转换为字符串</strong></p>
<p>全局方法 <strong>String()</strong> 可以将数字转换为字符串。</p>
<p>该方法可用于任何类型的数字，字母，变量，表达式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>(x)         <span class="comment">// 将变量 x 转换为字符串并返回</span></span><br><span class="line"><span class="built_in">String</span>(<span class="number">123</span>)       <span class="comment">// 将数字 123 转换为字符串并返回</span></span><br><span class="line"><span class="built_in">String</span>(<span class="number">100</span> + <span class="number">23</span>)  <span class="comment">// 将数字表达式转换为字符串并返回</span></span><br></pre></td></tr></table></figure>

<p>Number 方法 <strong>toString()</strong> 也是有同样的效果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x.toString()</span><br><span class="line">(<span class="number">123</span>).toString()</span><br><span class="line">(<span class="number">100</span> + <span class="number">23</span>).toString()</span><br></pre></td></tr></table></figure>

<p>在 <a href="https://www.runoob.com/jsref/jsref-obj-number.html" target="_blank" rel="noopener">Number 方法</a> 章节中，你可以找到更多数字转换为字符串的方法：</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">toExponential()</td>
<td align="left">把对象的值转换为指数计数法。</td>
</tr>
<tr>
<td align="left">toFixed()</td>
<td align="left">把数字转换为字符串，结果的小数点后有指定位数的数字。(只包含小数位)</td>
</tr>
<tr>
<td align="left">toPrecision()</td>
<td align="left">把数字格式化为指定的长度。(包含整数位)</td>
</tr>
</tbody></table>
<p><strong>将布尔值转换为字符串</strong></p>
<p>全局方法 <strong>String()</strong> 可以将布尔值转换为字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>(<span class="literal">false</span>)     <span class="comment">// 返回 "false"</span></span><br><span class="line"><span class="built_in">String</span>(<span class="literal">true</span>)     <span class="comment">// 返回 "true"</span></span><br></pre></td></tr></table></figure>

<p>Boolean 方法 <strong>toString()</strong> 也有相同的效果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">false</span>.toString()     <span class="comment">// 返回 "false"</span></span><br><span class="line"><span class="literal">true</span>.toString()      <span class="comment">// 返回 "true"</span></span><br></pre></td></tr></table></figure>

<p><strong>将日期转换为字符串</strong></p>
<p>Date() 返回字符串。</p>
<p>Date()   // 返回 Thu Jul 17 2014 15:38:19 GMT+0200 (W. Europe Daylight Time)</p>
<p>全局方法 String() 可以将日期对象转换为字符串。</p>
<p>String(new Date())   // 返回 Thu Jul 17 2014 15:38:19 GMT+0200 (W. Europe Daylight Time)</p>
<p>Date 方法 <strong>toString()</strong> 也有相同的效果。</p>
<p>实例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">obj.toString()  <span class="comment">// 返回 Thu Jul 17 2014 15:38:19 GMT+0200 (W. Europe Daylight Time)</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>getDate()</th>
<th>从 Date 对象返回一个月中的某一天 (1 ~ 31)。</th>
</tr>
</thead>
<tbody><tr>
<td>getDay()</td>
<td>从 Date 对象返回一周中的某一天 (0 ~ 6)。</td>
</tr>
<tr>
<td>getFullYear()</td>
<td>从 Date 对象以四位数字返回年份。</td>
</tr>
<tr>
<td>getHours()</td>
<td>返回 Date 对象的小时 (0 ~ 23)。</td>
</tr>
<tr>
<td>getMilliseconds()</td>
<td>返回 Date 对象的毫秒(0 ~ 999)。</td>
</tr>
<tr>
<td>getMinutes()</td>
<td>返回 Date 对象的分钟 (0 ~ 59)。</td>
</tr>
<tr>
<td>getMonth()</td>
<td>从 Date 对象返回月份 (0 ~ 11)。</td>
</tr>
<tr>
<td>getSeconds()</td>
<td>返回 Date 对象的秒数 (0 ~ 59)。</td>
</tr>
<tr>
<td>getTime()</td>
<td>返回 1970 年 1 月 1 日至今的毫秒数。</td>
</tr>
</tbody></table>
<p><strong>将字符串转换为数字</strong></p>
<p>全局方法 <strong>Number()</strong> 可以将字符串转换为数字。</p>
<p>字符串包含数字(如 “3.14”) 转换为数字 (如 3.14).</p>
<p>空字符串转换为 0。</p>
<p>其他的字符串会转换为 NaN (不是个数字)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>(<span class="string">"3.14"</span>)  <span class="comment">// 返回 3.14</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">" "</span>)    <span class="comment">// 返回 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">""</span>)    <span class="comment">// 返回 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">"99 88"</span>)  <span class="comment">// 返回 NaN</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>parseFloat()</th>
<th>解析一个字符串，并返回一个浮点数。</th>
</tr>
</thead>
<tbody><tr>
<td>parseInt()</td>
<td>解析一个字符串，并返回一个整数。</td>
</tr>
</tbody></table>
<p><strong>一元运算符 +</strong></p>
<p><strong>Operator +</strong> 可用于将变量转换为数字：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> y = <span class="string">"5"</span>;      <span class="comment">// y 是一个字符串</span></span><br><span class="line"><span class="keyword">var</span> x = + y;      <span class="comment">// x 是一个数字</span></span><br></pre></td></tr></table></figure>

<p>如果变量不能转换，它仍然会是一个数字，但值为 NaN (不是一个数字):</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> y = <span class="string">"John"</span>;   <span class="comment">// y 是一个字符串</span></span><br><span class="line"><span class="keyword">var</span> x = + y;      <span class="comment">// x 是一个数字 (NaN)</span></span><br></pre></td></tr></table></figure>

<p><strong>将布尔值转换为数字</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>(<span class="literal">false</span>)     <span class="comment">// 返回 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">true</span>)      <span class="comment">// 返回 1</span></span><br></pre></td></tr></table></figure>

<p><strong>将日期转换为数字</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">全局方法 <span class="built_in">Number</span>() 可将日期转换为数字。</span><br><span class="line"></span><br><span class="line">d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">Number</span>(d)          <span class="comment">// 返回 1404568027739</span></span><br><span class="line">日期方法 getTime() 也有相同的效果。</span><br><span class="line"></span><br><span class="line">d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">d.getTime()        <span class="comment">// 返回 1404568027739</span></span><br></pre></td></tr></table></figure>

<p><strong>自动转换类型</strong></p>
<p>当 JavaScript 尝试操作一个 “错误” 的数据类型时，会自动转换为 “正确” 的数据类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span> + <span class="literal">null</span>    <span class="comment">// 返回 5         null 转换为 0</span></span><br><span class="line"><span class="string">"5"</span> + <span class="literal">null</span>  <span class="comment">// 返回"5null"   null 转换为 "null"</span></span><br><span class="line"><span class="string">"5"</span> + <span class="number">1</span>     <span class="comment">// 返回 "51"      1 转换为 "1" </span></span><br><span class="line"><span class="string">"5"</span> - <span class="number">1</span>     <span class="comment">// 返回 4         "5" 转换为 5</span></span><br></pre></td></tr></table></figure>

<p><strong>自动转换为字符串</strong></p>
<p>当你尝试输出一个对象或一个变量时 JavaScript 会自动调用变量的 toString() 方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>).innerHTML = myVar;</span><br><span class="line"></span><br><span class="line">myVar = &#123;<span class="attr">name</span>:<span class="string">"Fjohn"</span>&#125;  <span class="comment">// toString 转换为 "[object Object]"</span></span><br><span class="line">myVar = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]       <span class="comment">// toString 转换为 "1,2,3,4"</span></span><br><span class="line">myVar = <span class="keyword">new</span> <span class="built_in">Date</span>()      <span class="comment">// toString 转换为 "Fri Jul 18 2014 09:08:55 GMT+0200"</span></span><br></pre></td></tr></table></figure>

<p>数字和布尔值也经常相互转换：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myVar = <span class="number">123</span>             <span class="comment">// toString 转换为 "123"</span></span><br><span class="line">myVar = <span class="literal">true</span>            <span class="comment">// toString 转换为 "true"</span></span><br><span class="line">myVar = <span class="literal">false</span>           <span class="comment">// toString 转换为 "false"</span></span><br></pre></td></tr></table></figure>

<p>下表展示了使用不同的数值转换为数字(Number), 字符串(String), 布尔值(Boolean):</p>
<table>
<thead>
<tr>
<th align="left">原始值</th>
<th align="left">转换为数字</th>
<th align="left">转换为字符串</th>
<th align="left">转换为布尔值</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">false</td>
<td align="left">0</td>
<td align="left">“false”</td>
<td align="left">false</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_false" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">true</td>
<td align="left">1</td>
<td align="left">“true”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_true" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">“0”</td>
<td align="left">false</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_number_0" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">“1”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_number_1" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">“0”</td>
<td align="left">0</td>
<td align="left">“0”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_string_0" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">“000”</td>
<td align="left">0</td>
<td align="left">“000”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_string_000" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">“1”</td>
<td align="left">1</td>
<td align="left">“1”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_string_1" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">NaN</td>
<td align="left">NaN</td>
<td align="left">“NaN”</td>
<td align="left">false</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_nan" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">Infinity</td>
<td align="left">Infinity</td>
<td align="left">“Infinity”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_infinity" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">-Infinity</td>
<td align="left">-Infinity</td>
<td align="left">“-Infinity”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_infinity_minus" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">“”</td>
<td align="left">0</td>
<td align="left">“”</td>
<td align="left">false</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_string_empty" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">“20”</td>
<td align="left">20</td>
<td align="left">“20”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_string_number" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">“Runoob”</td>
<td align="left">NaN</td>
<td align="left">“Runoob”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_string_text" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">[ ]</td>
<td align="left">0</td>
<td align="left">“”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_array_empty" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">[20]</td>
<td align="left">20</td>
<td align="left">“20”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_array_one_number" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">[10,20]</td>
<td align="left">NaN</td>
<td align="left">“10,20”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_array_two_numbers" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">[“Runoob”]</td>
<td align="left">NaN</td>
<td align="left">“Runoob”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_array_one_string" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">[“Runoob”,”Google”]</td>
<td align="left">NaN</td>
<td align="left">“Runoob,Google”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_array_two_strings" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">function(){}</td>
<td align="left">NaN</td>
<td align="left">“function(){}”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_function" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">{ }</td>
<td align="left">NaN</td>
<td align="left">“[object Object]”</td>
<td align="left">true</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_object" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">null</td>
<td align="left">0</td>
<td align="left">“null”</td>
<td align="left">false</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_null" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
<tr>
<td align="left">undefined</td>
<td align="left">NaN</td>
<td align="left">“undefined”</td>
<td align="left">false</td>
<td align="left"><a href="https://www.runoob.com/try/try.php?filename=tryjs_type_convert_undefined" target="_blank" rel="noopener">尝试一下 »</a></td>
</tr>
</tbody></table>
<h2 id="2-1-循环"><a href="#2-1-循环" class="headerlink" title="2.1 循环"></a>2.1 循环</h2><p>我们经常需要重复执行一些操作。</p>
<p>例如，我们需要将列表中的商品逐个输出，或者运行相同的代码将数字 1 到 10 逐个输出。</p>
<p><strong>循环</strong> 是一种重复运行同一代码的方法。</p>
<ul>
<li>for</li>
<li>forEach</li>
<li>do…while</li>
<li>while</li>
<li>for…in</li>
<li>for…of</li>
<li>for…in vs for…of</li>
</ul>
<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(list[i]) <span class="comment">//value</span></span><br><span class="line">  <span class="built_in">console</span>.log(i) <span class="comment">//index</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>您可以使用break中断for循环</li>
<li>您可以使用continue继续for循环的下一次迭代</li>
</ul>
<h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h3><p>在ES5中引入。给定一个数组，您可以使用list.forEach（）迭代其属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">list.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item) <span class="comment">//value</span></span><br><span class="line">  <span class="built_in">console</span>.log(index) <span class="comment">//index</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//index is optional</span></span><br><span class="line">list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">console</span>.log(item))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>不过需要注意的是你无法摆脱这个循环。</p>
</blockquote>
<h3 id="do…while"><a href="#do…while" class="headerlink" title="do…while"></a>do…while</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(list[i]) <span class="comment">//value</span></span><br><span class="line">  <span class="built_in">console</span>.log(i) <span class="comment">//index</span></span><br><span class="line">  i = i + <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">while</span> (i &lt; list.length)</span><br></pre></td></tr></table></figure>

<p>您可以使用break中断while循环：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (something) <span class="keyword">break</span></span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<p>你可以使用continue跳转到下一个迭代：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (something) <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//do something else</span></span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> (i &lt; list.length) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(list[i]) <span class="comment">//value</span></span><br><span class="line">  <span class="built_in">console</span>.log(i) <span class="comment">//index</span></span><br><span class="line">  i = i + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>您可以使用break中断while循环：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (something) <span class="keyword">break</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以使用continue跳转到下一个迭代：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (something) <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//do something else</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>与do…while的区别在于do…while总是至少执行一次循环。</p>
<h3 id="for…in"><a href="#for…in" class="headerlink" title="for…in"></a>for…in</h3><p>迭代对象的所有可枚举属性，给出属性名称。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> property <span class="keyword">in</span> object) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(property) <span class="comment">//property name</span></span><br><span class="line">  <span class="built_in">console</span>.log(object[property]) <span class="comment">//property value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="for…of"><a href="#for…of" class="headerlink" title="for…of"></a>for…of</h3><p>ES2015引入了for循环，它结合了forEach的简洁性和破解能力：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//iterate over the value</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value) <span class="comment">//value</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//get the index as well, using `entries()`</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [index, value] <span class="keyword">of</span> [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>].entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index) <span class="comment">//index</span></span><br><span class="line">  <span class="built_in">console</span>.log(value) <span class="comment">//value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意使用const。此循环在每次迭代中创建一个新范围，因此我们可以安全地使用它而不是let。</p>
<h3 id="for…in-VS-FOR…OF"><a href="#for…in-VS-FOR…OF" class="headerlink" title="for…in VS FOR…OF"></a>for…in VS FOR…OF</h3><p>与for…in的区别在于：</p>
<ul>
<li>for…of 迭代属性值</li>
<li>for…in 迭代属性名称</li>
</ul>
<h1 id="二-深入学习"><a href="#二-深入学习" class="headerlink" title="二. 深入学习"></a>二. 深入学习</h1><h2 id="2-1-作用域和闭包"><a href="#2-1-作用域和闭包" class="headerlink" title="2.1 作用域和闭包"></a>2.1 作用域和闭包</h2><h4 id="2-1-2-编译原理"><a href="#2-1-2-编译原理" class="headerlink" title="2.1.2 编译原理"></a>2.1.2 编译原理</h4><p>传统的编译语言中，程序中的一段源代码在执行之前会经历三个步骤，被称为”编译“</p>
<ol>
<li><strong>分词/词法分析（Tokenizing/Lexing）</strong><br>这个过程会将由字符组成的字符串分解成（对编程语言来说）有意义的代码块，这些代码块被称为词法单元（token）。例如，考虑程序var a = 2;。这段程序通常会被分解成为下面这些词法单元：var、a、=、2 、;。空格是否会被当作词法单元，取决于空格在这门语言中是否具有意义。</li>
<li><strong>解析/语法分析（Parsing）</strong><br>这个过程是将词法单元流（数组）转换成一个由元素逐级嵌套所组成的代表了程序语法结构的树。这个树被称为“抽象语法树”（Abstract Syntax Tree, AST）。var a = 2；的抽象语法树中可能会有一个叫作VariableDeclaration的顶级节点，接下来是一个叫作Identifier（它的值是a）的子节点，以及一个叫作AssignmentExpression的子节点。AssignmentExpression节点有一个叫作NumericLiteral（它的值是2）的子节点。</li>
<li><strong>代码生成</strong><br><strong>将AST转换为可执行代码的过程被称为代码生成</strong>。这个过程与语言、目标平台等息息相关。抛开具体细节，简单来说就是有某种方法可以将var a = 2；的AST转化为一组机器指令，用来创建一个叫作a的变量（包括分配内存等），并将一个值储存在a中。</li>
</ol>
<p>JavaScript引擎要复杂得多，在语法分析和代码生成阶段有特定的步骤来对运行性能进行优化，包括对冗余元素进行优化等。</p>
<h4 id="2-1-3-理解作用域"><a href="#2-1-3-理解作用域" class="headerlink" title="2.1.3 理解作用域"></a>2.1.3 理解作用域</h4><p><strong>重要概念</strong></p>
<ul>
<li>引擎从头到尾负责整个JavaScript程序的编译及执行过程。</li>
<li>编译器引擎的好朋友之一，负责语法分析及代码生成等脏活累活。</li>
<li>作用域引擎的另一位好朋友，负责收集并维护由所有声明的标识符（变量）组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对<strong>这些标识符的访问权限</strong>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>针对上述的代码语句，编译器将执行下述处理逻辑</p>
<ol>
<li>遇到var a，编译器会询问作用域是否已经有一个该名称的变量存在于同一个作用域的集合中。如果是，编译器会忽略该声明，继续进行编译；否则它会要求作用域在当前作用域的集合中声明一个新的变量，并命名为a。</li>
<li>接下来编译器会为引擎生成运行时所需的代码，这些代码被用来处理a = 2这个赋值操作。引擎运行时会首先询问作用域，在当前的作用域集合中是否存在一个叫作a的变量。如果是，引擎就会使用这个变量；如果否，引擎会继续查找该变量。如果引擎最终找到了a变量，就会将2赋值给它。否则引擎就会举手示意并抛出一个异常！总结：变量的赋值操作会执行两个动作，首先编译器会在当前作用域中声明一个变量（如果之前没有声明过），然后在运行时引擎会在作用域中查找该变量，如果能够找到就会对它赋值。</li>
</ol>
<p><strong>引擎和作用域的对话</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>让我们把上面这段代码的处理过程想象成一段对话，这段对话可能是下面这样的。<br>引擎：我说作用域，我需要为foo进行RHS引用。你见过它吗？</p>
<ol>
<li><p>作用域：别说，我还真见过，编译器那小子刚刚声明了它。它是一个函数，给你。</p>
</li>
<li><p>引擎：哥们太够意思了！好吧，我来执行一下foo。</p>
</li>
<li><p>引擎：作用域，还有个事儿。我需要为a进行LHS引用，这个你见过吗？</p>
</li>
<li><p>作用域：这个也见过，编译器最近把它声名为foo的一个形式参数了，拿去吧。</p>
</li>
<li><p>引擎：大恩不言谢，你总是这么棒。现在我要把2赋值给a。</p>
</li>
<li><p>引擎：哥们，不好意思又来打扰你。我要为console进行RHS引用，你见过它吗？</p>
</li>
<li><p>作用域：咱俩谁跟谁啊，再说我就是干这个。这个我也有，console是个内置对象。给你。</p>
</li>
<li><p>引擎：么么哒。我得看看这里面是不是有log(..)。太好了，找到了，是一个函数。</p>
</li>
<li><p>引擎：哥们，能帮我再找一下对a的RHS引用吗？虽然我记得它，但想再确认一次。</p>
</li>
<li><p>作用域：放心吧，这个变量没有变动过，拿走，不谢。</p>
</li>
<li><p>引擎：真棒。我来把a的值，也就是2，传递进log(..)。</p>
</li>
</ol>
<p><strong>LHS和RHS</strong></p>
<p><code>LHS</code> 和 <code>RHS</code>是对变量的两种查找操作，查找的过程是由作用域（词法作用域）进行协助，在编译的第二步中执行。<br> LHS(<code>Left-hand Side</code>)引用和RHS(<code>Right-hand Side</code>)引用。通常是指等号（赋值运算）的左右边的引用。</p>
<p><strong>RHS的目的是取得源值</strong></p>
<p><strong>LHS是取得源引用</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = a;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> c = foo(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li>LHS找到c</li>
<li>RHS寻找foo(2)的值</li>
<li>把2赋值给a时，LHS找到a</li>
<li>var b = a时候, LHS找到b, RHS找到a</li>
<li>return a + b时候，RHS找到a和b</li>
</ol>
<p>所以一共3次LHS，3次RHS</p>
<h4 id="2-1-4作用域嵌套"><a href="#2-1-4作用域嵌套" class="headerlink" title="2.1.4作用域嵌套"></a>2.1.4作用域嵌套</h4><p>当一个块或函数嵌套在另一个块或函数中时，就发生了作用域的嵌套。因此，在当前作用域中无法找到某个变量时，引擎就会在外层嵌套的作用域中继续查找，直到找到该变量，或抵达最外层的作用域（也就是全局作用域）为止。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a+b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line">foo(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>对b进行的RHS引用无法在函数foo内部完成，但可以在上一级作用域（在这个例子中就是全局作用域）中完成。</p>
<p>因此，回顾一下引擎和作用域之间的对话，会进一步听到：</p>
<ol>
<li>引擎：foo的作用域兄弟，你见过b吗？我需要对它进行RHS引用。</li>
<li>作用域：听都没听过，走开。</li>
<li>引擎：foo的上级作用域兄弟，咦？有眼不识泰山，原来你是全局作用域大哥，太好了。你见过b吗？我需要对它进行RHS引用。</li>
<li>作用域：当然了，给你吧。遍历嵌套作用域链的规则很简单：引擎从当前的执行作用域开始查找变量，如果找不到，就向上一级继续查找。当抵达最外层的全局作用域时，无论找到还是没找到，查找过程都会停止。</li>
</ol>
<p><img src="/img/%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%9F%A5%E6%89%BE.jpg" alt="作用域查找.jpg"></p>
<p>这个建筑代表程序中的嵌套作用域链。第一层楼代表当前的执行作用域，也就是你所处的位置。建筑的顶层代表全局作用域。LHS和RHS引用都会在当前楼层进行查找，如果没有找到，就会坐电梯前往上一层楼，如果还是没有找到就继续向上，以此类推。一旦抵达顶层（全局作用域），可能找到了你所需的变量，也可能没找到，但无论如何查找过程都将停止。</p>
<p><strong>为什么区分LHS和RHS</strong></p>
<p>因为在变量没有声明（在任何作用域中都无法找到该变量）的情况下，这两种查询的行为是不一样的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a+b);</span><br><span class="line">  b = a;</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>第一次对b进行RHS查询时是无法找到该变量的。也就是说，这是一个“未声明”的变量，因为在任何相关的作用域中都无法找到它。如果RHS查询在所有嵌套的作用域中遍寻不到所需的变量，引擎就会抛出ReferenceError异常。值得注意的是，ReferenceError是非常重要的异常类型。相较之下，当引擎执行LHS查询时，如果在顶层（全局作用域）中也无法找到目标变量，全局作用域中就会创建一个具有该名称的变量，并将其返还给引擎，前提是程序运行在非“严格模式”下。“不，这个变量之前并不存在，但是我很热心地帮你创建了一个。”</p>
<p>ES5中引入了“严格模式”。同正常模式，或者说宽松/懒惰模式相比，严格模式在行为上有很多不同。其中一个不同的行为是严格模式禁止自动或隐式地创建全局变量。因此，在严格模式中LHS查询失败时，并不会创建并返回一个全局变量，引擎会抛出同RHS查询失败时类似的ReferenceError异常。接下来，如果RHS查询找到了一个变量，但是你尝试对这个变量的值进行不合理的操作，比如试图对一个非函数类型的值进行函数调用，或者引用null或undefined类型的值中的属性，那么引擎会抛出另外一种类型的异常，叫作TypeError。ReferenceError同作用域判别失败相关，而TypeError则代表作用域判别成功了，但是对结果的操作是非法或不合理的。</p>
<p><strong>总结</strong></p>
<p>作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。</p>
<p>如果查找的目的是对变量进行赋值，那么就会使用LHS查询；如果目的是获取变量的值，就会使用RHS查询。赋值操作符会导致LHS查询。=操作符或调用函数时传入参数的操作都会导致关联作用域的赋值操作。</p>
<p>JavaScript引擎首先会在代码执行前对其进行编译，在这个过程中，像var a = 2这样的声明会被分解成两个独立的步骤：</p>
<ol>
<li>首先，var a在其作用域中声明新变量。这会在最开始的阶段，也就是代码执行前进行。</li>
<li>接下来，a = 2会查询（LHS查询）变量a并对其进行赋值。LHS和RHS查询都会在当前执行作用域中开始，如果有需要（也就是说它们没有找到所需的标识符），就会向上级作用域继续查找目标标识符，这样每次上升一级作用域（一层楼），最后抵达全局作用域（顶层），无论找到或没找到都将停止。不成功的RHS引用会导致抛出ReferenceError异常。不成功的LHS引用会导致自动隐式地创建一个全局变量（非严格模式下），该变量使用LHS引用的目标作为标识符，或者抛出ReferenceError异常（严格模式下）。</li>
</ol>
<h4 id="2-1-5-词法作用域"><a href="#2-1-5-词法作用域" class="headerlink" title="2.1.5 词法作用域"></a>2.1.5 词法作用域</h4><p>词法作用域就是定义在词法分析阶段的作用域</p>
<p>作用域查找会在找到第一个匹配的标识符时停止， 在多层的嵌套作用域中可以定义同名的标识符，这叫做”遮蔽效应“（内部的标识符遮蔽了外部的标识符）。</p>
<p>无论函数在哪里调用，也无论它如何被调用，它的词法作用域都只由函数被声明时所处的位置决定。</p>
<p>词法作用域只会查找一级标识符，比如a,   b,  c，类似于foo.bar.baz，词法作用域只会试图查找foo标识符，找到这个变量后，对象属性访问规则会分别接管对bar和baz属性的访问。</p>
<p><strong>注意</strong></p>
<p>通过eval和with可以做到欺骗词法，但是会导致性能大大降低，因此我们应该尽量避免使用eval和with</p>
<h4 id="2-1-6-函数作用域"><a href="#2-1-6-函数作用域" class="headerlink" title="2.1.6 函数作用域"></a>2.1.6 函数作用域</h4><p>属于这个函数的全部变量都可以在这个函数的范围内使用（在嵌套的作用域中也可以访问），这能够充分利用JavaScript变量可以根据需要动态改变值的特性。</p>
<p><strong>隐藏内部实现</strong></p>
<p>我们可以从缩写的代码中挑选出任意一个小片段，然后用函数声明对它进行包装，也就是说这段代码中涉及到的变量或者函数都将绑定在这个新创建的包装函数的作用域中。</p>
<blockquote>
<p>最小授权原则： 在软件设计中，应该最小限度地暴露必要的内容，而将其他内容都”隐藏“起来，比如某个某个模块或者对象的API的设计</p>
</blockquote>
<p><strong>规避冲突</strong></p>
<p>”隐藏“作用域中的变量和函数所带来的另一个好处，是可以避免同名标识符之间的冲突，两个标识符可能具有相同的名字但用途却不一样，无意间可能造成命名冲突，冲突会导致变量的值被恶意修改。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    i = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a + i);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">    bar(i * <span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码因为变量冲突导致了死循环</p>
<p><strong>全局命名空间</strong></p>
<p>很多第三方库在全局作用域中声明一个名字足够独特的变量，通常是一个对象，这个对象被用作库的命名空间，所有需要暴露给外界的功能都会成为这个对象（命名空间）的属性，而不是将自己的标识符暴露在顶级的词法作用域中。</p>
<p>比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> jQuery = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    addClass()&#123;&#125;,</span><br><span class="line">    removeClass()&#123;&#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>模块管理</strong></p>
<p>另外一种避免全局冲突的方法是使用模块机制，如Seajs, require.js,commonjs等，这写工具并没有违反词法作用域规则，而是强制所有标识符都不能注入到共享作用域中，而是保持在私有的，无冲突的作用中。</p>
<h4 id="2-1-7-函数声明，函数表达式，匿名函数"><a href="#2-1-7-函数声明，函数表达式，匿名函数" class="headerlink" title="2.1.7 函数声明，函数表达式，匿名函数"></a>2.1.7 函数声明，函数表达式，匿名函数</h4><p>区分函数声明和表达式最简单的方法是看function关键字出现在声明中的位置（不仅仅是第一行代码， 而是整个声明中的位置），如果function是声明中的第一个词，则为函数声明，否则就是一个函数表达式。</p>
<p>如以下两段代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a =<span class="number">2</span> ;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>

<p>第1段代码必须显示声明函数foo并显示调用，污染了所在的作用域</p>
<p>第2段代码为一个函数表达式，并使用匿名函数免除了对所在作用域的污染</p>
<p><strong>回调函数中的匿名函数表达式</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"I wanted 1 second!!"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>上述代码使用setTimeout的回调函数使用了匿名函数表达式</p>
<p>匿名函数表达式写起来非常简单快捷，但是同时也存在几个缺点：</p>
<ol>
<li>在追踪堆栈中不会显示出有意义的函数名，使得调试困难。</li>
<li>如果没有函数名，就只能通过过时的arguments.callee引用自身</li>
<li>函数名对于代码的可读性、可理解性很重要</li>
</ol>
<p><strong>始终给函数表达式添加函数名是最佳实践</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timeoutHandler</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"I wanted 1 second!!!"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="2-1-8-立即执行函数-IIFE-Immediately-invoked-Function-Expression"><a href="#2-1-8-立即执行函数-IIFE-Immediately-invoked-Function-Expression" class="headerlink" title="2.1.8 立即执行函数(IIFE, Immediately invoked Function Expression)"></a>2.1.8 立即执行函数(IIFE, Immediately invoked Function Expression)</h4><p>由于函数被包含在一对()括号内部，因此成为了一个表达式，通过在末尾加上另外一个()可以立即执行这个函数，比如(function foo(){ .. })()。第一个()将函数变成表达式，第二个()执行了这个函数。</p>
<p><strong>IIFE传递参数</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">global</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">  <span class="built_in">console</span>.log(global.a);</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>

<p>我们将window对象的引用传递进去，但将参数命名为global，因此在代码风格上对全局对象的引用变得比引用一个没有“全局”字样的变量更加清晰。当然可以从外部作用域传递任何你需要的东西，并将变量命名为任何你觉得合适的名字。这对于改进代码风格是非常有帮助的。</p>
<p><strong>IIFE运行顺序的倒置，UMD代码封装用到</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">def</span>)</span>&#123;</span><br><span class="line">  def(<span class="built_in">window</span>);</span><br><span class="line">&#125;)(<span class="function"><span class="keyword">function</span>(<span class="params">global</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">  <span class="built_in">console</span>.log(global.a);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="2-1-9-块作用域"><a href="#2-1-9-块作用域" class="headerlink" title="2.1.9 块作用域"></a>2.1.9 块作用域</h4><p>下述两段代码暴露了一些问题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(foo)&#123;</span><br><span class="line">   <span class="keyword">var</span> bar = foo * <span class="number">2</span>;</span><br><span class="line">   bar = something(bar);</span><br><span class="line">   <span class="built_in">console</span>.log(bar);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>for循环的循环变量会暴露到外部作用域，而不是只被限制在了for循环的范围内</p>
<p>而if内的变量声明也会暴露到外部作用域中</p>
<p>因此我们需要块作用域的存在</p>
<p><strong>with</strong></p>
<p>with的使用会创建出一个块级作用域</p>
<p><strong>try/catch</strong></p>
<p>非常少有人会注意到JavaScript的ES3规范中规定try/catch的catch分句会创建一个块作用域，其中声明的变量仅在catch内部有效</p>
<p><strong>let</strong></p>
<p>到目前为止，我们知道JavaScript在暴露块作用域的功能中有一些奇怪的行为。如果仅仅是这样，那么JavaScript开发者多年来也就不会将块作用域当作非常有用的机制来使用了。</p>
<p>幸好，ES6改变了现状，引入了新的let关键字，提供了除var以外的另一种变量声明方式。let关键字可以将变量绑定到所在的任意作用域中（通常是{ .. }内部）。换句话说，let为其声明的变量隐式地劫持了所在的块作用域。</p>
<p><strong>const</strong></p>
<p>除了let以外，ES6还引入了const，同样可以用来创建块作用域变量，但其值是固定的（常量）。之后任何试图修改值的操作都会引起错误。</p>
<h4 id="2-1-10-提升"><a href="#2-1-10-提升" class="headerlink" title="2.1.10 提升"></a>2.1.10 提升</h4><p>提升只会发生在函数声明和变量声明，函数表达式不会发生提升 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(foo());   </span><br><span class="line"><span class="built_in">console</span>.log(foo1());   <span class="comment">// TypeError</span></span><br><span class="line"><span class="built_in">console</span>.log(str);      <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello foo"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello foo1"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"hello str"</span>;</span><br></pre></td></tr></table></figure>

<p>在提升过程中，函数声明比变量声明优先级高</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">foo();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"1"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"2"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码发生提升后</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"1"</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>

<h4 id="2-1-11-作用域和闭包"><a href="#2-1-11-作用域和闭包" class="headerlink" title="2.1.11 作用域和闭包"></a>2.1.11 作用域和闭包</h4><p>闭包就是能够读取其他函数内部变量的函数。例如在javascript中，只有函数内部的子函数才能读取<a href="https://baike.baidu.com/item/局部变量/9844788" target="_blank" rel="noopener">局部变量</a>，所以闭包可以理解成“定义在一个<a href="https://baike.baidu.com/item/函数/301912" target="_blank" rel="noopener">函数</a>内部的函数“。在本质上，闭包是将函数内部和函数外部连接起来的桥梁。</p>
<p>当函数可以记住并访问所在的词法作用域，即使函数是在当前词法作用域之外执行，这时就产生了闭包。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 打印5个5，因为5个匿名函数使用的i都为全局作用域的i,而setTimeout的回调函数会在for循环执行完成之后执行</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正常打印0,1,2,3,4,5，使用IIFE创建新的作用域，每个匿名函数产生闭包</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正常打印0,1,2,3,4,5, 使用let创建块级作用域，只在for循环内才能访问到i</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>模块</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CommonUtils = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">"common utils"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">printStr</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        printStr: printStr</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">CommonUtils.printStr();</span><br></pre></td></tr></table></figure>

<p>IIFE匿名函数内部return回模块的公共API， 内部函数引用了外部作用域的变量，这样便构成了一个模块</p>
<p><strong>现代的模块机制</strong></p>
<p>一个简单的例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Modules = (<span class="function"><span class="keyword">function</span> <span class="title">Manager</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> modules = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">define</span>(<span class="params">name, deps, impl</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; deps.length; i++)&#123;</span><br><span class="line">            deps[i] = modules[deps[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        modules[name] = impl.apply(impl, deps);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> modules[name];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        define: define,</span><br><span class="line">        <span class="keyword">get</span>: <span class="keyword">get</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">Modules.define("bar", [], function()&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params">who</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Let me introduce: "</span> + who;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        hello: hello</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">Modules.define(<span class="string">"foo"</span>, [<span class="string">"bar"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">bar</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> hungry = <span class="string">"hippo"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">awesome</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(bar.hello(hungry).toUpperCase());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        awesome: awesome</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = Modules.get(<span class="string">"bar"</span>);</span><br><span class="line"><span class="keyword">var</span> foo = Modules.get(<span class="string">"foo"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bar.hello(<span class="string">"hippo"</span>));</span><br><span class="line">foo.awesome();</span><br></pre></td></tr></table></figure>

<h2 id="2-2-this和对象原型"><a href="#2-2-this和对象原型" class="headerlink" title="2.2 this和对象原型"></a>2.2 this和对象原型</h2>
      
    </div>
    
    
    
    <div>
    
      <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
    
  </div>

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/wodegongzhonghao.jpg" alt="davidLee wechat" style="width: 200px; max-width: 100%;"/>
    <div>欢迎您扫一扫上面的微信公众号，订阅我的公众号</div>
</div>

      </div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/weixinpay.jpeg" alt="davidLee 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpeg" alt="davidLee 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"><i class="fa fa-tag"></i> JavaScript</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/06/04/2020-2020-06-04-%E5%89%8D%E7%AB%AF%E8%B5%84%E6%BA%90%E6%95%B4%E7%90%86/" rel="next" title="前端资源整理">
                <i class="fa fa-chevron-left"></i> 前端资源整理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
  <div class="bdsharebuttonbox">
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
    <a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
    <a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a>
    <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
    <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a class="bds_count" data-cmd="count"></a>
  </div>
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "2",
        "bdMiniList": false,
        "bdPic": ""
      },
      "share": {
        "bdSize": "16",
        "bdStyle": "0"
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "分享到：",
        "viewSize": "16"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="davidLee" />
            
              <p class="site-author-name" itemprop="name">davidLee</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7Carchive">
              
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/davidLee6688" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:liweidobest@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
                <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
              </a>
            </div>
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一-基础知识"><span class="nav-text">一. 基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-JavaScript之HelloWorld"><span class="nav-text">1.1 JavaScript之HelloWorld</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-运算符"><span class="nav-text">1.2 运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-switch语句"><span class="nav-text">1.3 switch语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-值的比较"><span class="nav-text">1.4 值的比较</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-函数Function"><span class="nav-text">1.5 函数Function</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-现代模式”use-strict”"><span class="nav-text">1.6 现代模式”use strict”</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一：简单介绍"><span class="nav-text">一：简单介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二：使用方法"><span class="nav-text">二：使用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1：为某个脚本使用严格模式"><span class="nav-text">1：为某个脚本使用严格模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2：单函数使用严格模式"><span class="nav-text">2：单函数使用严格模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三：严格模式带来的具体差异"><span class="nav-text">三：严格模式带来的具体差异</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1：消除了静默错误，改为抛出错误"><span class="nav-text">1：消除了静默错误，改为抛出错误</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2：修复了JS的随意性，提升了优化能力"><span class="nav-text">2：修复了JS的随意性，提升了优化能力</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3：让eval和arguments变的更加简单"><span class="nav-text">3：让eval和arguments变的更加简单</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4：更加安全的JS"><span class="nav-text">4：更加安全的JS</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5：对未来的兼容"><span class="nav-text">5：对未来的兼容</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-7-变量"><span class="nav-text">1.7 变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-8-条件运算符和"><span class="nav-text">1.8 条件运算符和?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-9-交互：alert、prompt-和-confirm"><span class="nav-text">1.9 交互：alert、prompt 和 confirm</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-0-数据类型"><span class="nav-text">2.0 数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-循环"><span class="nav-text">2.1 循环</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#for"><span class="nav-text">for</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forEach"><span class="nav-text">forEach</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#do…while"><span class="nav-text">do…while</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while"><span class="nav-text">while</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for…in"><span class="nav-text">for…in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for…of"><span class="nav-text">for…of</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for…in-VS-FOR…OF"><span class="nav-text">for…in VS FOR…OF</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二-深入学习"><span class="nav-text">二. 深入学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-作用域和闭包"><span class="nav-text">2.1 作用域和闭包</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-2-编译原理"><span class="nav-text">2.1.2 编译原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-3-理解作用域"><span class="nav-text">2.1.3 理解作用域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-4作用域嵌套"><span class="nav-text">2.1.4作用域嵌套</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-5-词法作用域"><span class="nav-text">2.1.5 词法作用域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-6-函数作用域"><span class="nav-text">2.1.6 函数作用域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-7-函数声明，函数表达式，匿名函数"><span class="nav-text">2.1.7 函数声明，函数表达式，匿名函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-8-立即执行函数-IIFE-Immediately-invoked-Function-Expression"><span class="nav-text">2.1.8 立即执行函数(IIFE, Immediately invoked Function Expression)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-9-块作用域"><span class="nav-text">2.1.9 块作用域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-10-提升"><span class="nav-text">2.1.10 提升</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-11-作用域和闭包"><span class="nav-text">2.1.11 作用域和闭包</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-this和对象原型"><span class="nav-text">2.2 this和对象原型</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
	<span title="Site words total count">
     字 </span>
    <!--<span title="symbols_count_time.count_total">258k</span>-->
  
        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'lCk9ARlsA5kpg8AAioyPXYCB-gzGzoHsz',
        appKey: 'iS4AXSvlD0t0ESeSalr6dOIm',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "./public/search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body>
</html>
